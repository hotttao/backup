---
title: 4.13 网络
date: 2020-01-28
categories:
    - 运维
tags:
    - Linux性能调优
---
本节我们讲解网络相关的操作系统原理。网络分析的目的除了改进网络延时和吞吐量外，另一个常见的任务是消除可能由丢包引起的延时异常。网络分析是跨硬件和软件的。硬件指的是物理网络包括网络接口卡，交换机，路由器和网管。软件指的是内核协议栈。
<!-- more -->

## 1. 网络
本节我们将从以下几个方面介绍网络相关的操作系统原理:
1. 网络协议栈
2. TCP 连接状态转移
3. TCP 拥塞控制
4. 网络硬件
5. 操作系统的网络栈

最后我们会介绍网络相关的检测指标。想对网络深入了解，推荐大家阅读:
1. [CCNA学习指南](https://book.douban.com/subject/2968802/)
2. [TCP/IP详解 卷1：协议](https://book.douban.com/subject/1088054/)

## 1. 网络协议栈
网络的五层和七层模型想必大家都听过，下面是这两个协议栈模型的示意图:

![network_model](/images/linux_pf/network_model.png)

数据经过网络协议栈时，通过包封装将每层协议的元数据添加到负载前(包头)，之后(包后)，或者二者，但不会修改负载数据。下面展示了以太网 TCP/IP 的栈封装过程:

![tcp_encapsulation](/images/linux_pf/tcp_encapsulation.png)

数据就是这样经过封装，并通过路由器等网络设备在网络上进行传播，并最后被目标主机接收和解析。

![network_trans](/images/linux_pf/network_trans.png)

## 2. TCP 状态转移
[TCP 状态转移](http://www.pianshen.com/article/9701265948/)


### 2.1 长连接和短连接

## 3. TCP 拥塞控制
TCP 的滑动窗口，拥塞控制可以看这篇文章[图解TCP 重传、滑动窗口、流量控制、拥塞控制发愁](https://www.cnblogs.com/xiaolincoding/p/12732052.html)，图文并茂很容易理解。