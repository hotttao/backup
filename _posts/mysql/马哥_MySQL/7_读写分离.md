---
title: 7 Mariadb 读写分离
date: 2019-10-12
categories:
    - 存储
tags:
    - 马哥 MySQL 运维
---

Mariadb 读写分离

<!-- more -->


## 1. 读写分离器简介
- 作用:
	- 由于写操作只能发往主节点
	- 通常读操作都发往从节点
- 可用软件:	
  	- 复制集群:
		1. mysql-proxy (C++) --> Qihoo (atlas)
		2. amoeba (java) --> Cobar
		3. dbrelay
		4. maxscale
		5. ProxySQL
		6. mycat
		7. AliSQL
	- 分区集群: 
		- 垂直切分-按表进行切分
		- 水平切分-按表中的行进行的切分
			1. cobar
			2. gizzard
- 双主模型: 是不需要读写分离的，只需要负载均衡
	- Mariadb Cluster
	- PXC: Percona XtraDB Cluster

## 2. ProxySQL		
		

## 3. MHA
Mairadb 主从复制，需要读写分离，还需要 MHA 做高可用，配置起来较为麻烦。建议使用 PXC 或 AliSQL 做多主集群，这样只需要使用 Nginx 进行负载均衡即可。