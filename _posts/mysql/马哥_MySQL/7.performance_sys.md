---
title: 7. performance_schema 和 sys
date: 2019-10-11
categories:
    - 存储
tags:
    - 马哥 MySQL 运维
---

Mariadb 的系统表 performance_schema 与 sys。

<!-- more -->

## 参考
- [Mariadb Document](https://mariadb.com/kb/en/system-tables/)
- [初相识｜performance_schema全方位介绍](https://mp.weixin.qq.com/s/ELJhdttEo0q22bWlB8WveA)
- [Naridb Plugin](https://mariadb.com/kb/en/list-of-plugins/)

## 1. performance_schema

MySQL的performance schema 用于监控MySQL server在一个较低级别的运行过程中的资源消耗、资源等待等情况，它具有以下特点： 
1. 提供了一种在数据库运行时实时检查server的内部执行情况的方法。performance_schema 数据库中的表使用performance_schema存储引擎。该数据库主要关注数据库运行过程中的性能相关的数据，与information_schema不同，information_schema主要关注server运行过程中的元数据信息 
2. 

|Table|Description|
|:---|:---|
|accounts|客户端帐户连接统计|
|cond_instances|同步对象实例.|
|events_stages_current|Current stage events.|
|events_stages_history|Ten most recent stage events per thread.|
|events_stages_history_long|Ten thousand most recent stage events.|
|events_stages_summary_by_account_by_event_name|Summarized stage events per account and event name.|
|events_stages_summary_by_host_by_event_name|Summarized stage events per host and event name.|
|events_stages_summary_by_thread_by_event_name|Summarized stage events per thread and event name.|
|events_stages_summary_by_user_by_event_name|Summarized stage events per user name and event name.|
|events_stages_summary_global_by_event_name|Summarized stage events per event name.|
|events_statements_current|Current statement events.|
|events_statements_history|Ten most recent events per thread.|
|events_statements_history_long|Ten thousand most recent stage events.|
|events_statements_summary_by_account_by_event_name|Summarized statement events per account and event name.|
|events_statements_summary_by_digest|Summarized statement events by scheme and digest.|
|events_statements_summary_by_host_by_event_name|Summarized statement events by host and event name.|
|events_statements_summary_by_program	|
|events_statements_summary_by_thread_by_event_name|Summarized statement events by thread and event name.|
|events_statements_summary_by_user_by_event_name|Summarized statement events by user and event name.|
|events_statements_summary_global_by_event_name|Summarized statement events by event name.|
|events_transactions_current|Current transaction events for each thread.|
|events_transactions_history|Most recent completed transaction events for each thread.|
|events_transactions_history_long|Most recent completed transaction events that have ended globally.|
|events_transactions_summary_by_account_by_event_name|Transaction events aggregated by account and event.|
|events_transactions_summary_by_host_by_event_name|Transaction events aggregated by host and event..|
|events_transactions_summary_by_thread_by_event_name|Transaction events aggregated by thread and event..|
|events_transactions_summary_by_user_by_event_name|Transaction events aggregated by user and event..|
|events_transactions_summary_global_by_event_name|Transaction events aggregated by event name.|
|events_waits_current|Current wait events.|
|events_waits_history|Ten most recent wait events per thread.|
|events_waits_history_long|Ten thousand most recent wait events per thread.|
|events_waits_summary_by_account_by_event_name|Summarized wait events by account and event name.|
|events_waits_summary_by_host_by_event_name|Summarized wait events by host and event name.|
|events_waits_summary_by_instance|Summarized wait events by instance.|
|events_waits_summary_by_thread_by_event_name|Summarized wait events by thread and event name.|
|events_waits_summary_by_user_by_event_name|Summarized wait events by user and event name.|
|events_waits_summary_global_by_event_name|Summarized wait events by event name.|
|file_instances|Seen files.|
|file_summary_by_event_name|File events summarized by event name.|
|file_summary_by_instance|File events summarized by instance.|
|host_cache|Host and IP information.|
|hosts|Connections by host.|
|memory_summary_by_account_by_event_name|Memory usage statistics aggregated by account and event.|
|memory_summary_by_host_by_event_name|Memory usage statistics aggregated by host. and event.|
|memory_summary_by_thread_by_event_name|Memory usage statistics aggregated by thread and event..|
|memory_summary_by_user_by_event_name|Memory usage statistics aggregated by user and event..|
|memory_summary_global_by_event_name|Memory usage statistics aggregated by event.|
|mutex_instances|Seen mutexes.|
|objects_summary_global_by_type|Object wait events.|
|performance_timers|Available event timers.|
|prepared_statements_instances|Aggregate statistics of prepared statements.|
|replication_applier_configuration|Configuration settings affecting slave transactions.|
|replication_applier_status|General transaction execution status on the slave.|
|rwlock_instances|Seen read-write locks.|
|session_account_connect_attrs|Current session connection attributes.|
|session_connect_attrs|All session connection attributes.|
|setup_actors|Details on foreground thread monitoring.|
|setup_consumers|Consumers for which event information is stored.|
|setup_instruments|Instrumented objects for which events are collected.|
|setup_objects|Objects to be monitored.|
|setup_timers|Currently selected event timers.|
|socket_instances|Active connections.|
|socket_summary_by_event_name|Timer and byte count statistics by socket instrument.|
|socket_summary_by_instance|Timer and byte count statistics by socket instance.|
|table_io_waits_summary_by_index_usage|Aggregate table I/O wait events by index.|
|table_io_waits_summary_by_table|Aggregate table I/O wait events by table.|
|table_lock_waits_summary_by_table|Aggregate table lock wait events by table.|
|threads|Server thread information.|
|users|Connection statistics by user.|

### 1.1 accounts


### 1.2 cond_instances
|Column|Description|
|:---|:---|
|NAME|与条件对象关联的客户端用户名称，如果是内部线程则为 null|
|OBJECT_INSTANCE_BEGIN|条件对象的内存地址|

cond_instances表列出了服务器执行时的所有条件。条件对象是一种内部代码机制，用于通知特定事件已经发生，以便等待该条件的任何线程可以继续。

存储在性能模式中的最大条件数量由performance_schema_max_cond_instances系统变量决定。

### 1.3
|Column|Description|
|:---|:---|

### 1.3
|Column|Description|
|:---|:---|

### 1.3
|Column|Description|
|:---|:---|

### 1.3
|Column|Description|
|:---|:---|

### 1.3
|Column|Description|
|:---|:---|

### 1.3
|Column|Description|
|:---|:---|

### 1.3
|Column|Description|
|:---|:---|

### 1.3
|Column|Description|
|:---|:---|

### 1.3
|Column|Description|
|:---|:---|

### 1.3
|Column|Description|
|:---|:---|